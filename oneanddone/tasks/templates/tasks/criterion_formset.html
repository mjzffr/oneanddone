{% set formset = criterion_formset %}
{% set max_forms = 10 %}
<div class="billboard content-container">
  <h5>{{ _('Invalidation Criteria') }}</h5>
  {{ formset.management_form }}

  <table id="criterion_formset_table">
    <tr>
      <th>{{ formset[0].field_name.label_tag() }} *</th>
      <th>{{ formset[0].relation.label_tag() }} *</th>
      <th>{{ formset[0].field_value.label_tag() }} *</th>
      <th></th>
  {% for form in formset %}
      <tr {% if not loop.first %}class="extra-criterion"{% endif %}>
          <td>{{ form.field_name.errors }}{{ form.field_name }}</td>
          <td>{{ form.relation.errors }}{{ form.relation }} </td>
          <td>{{ form.field_value.errors }}{{ form.field_value }}</td>
          <td>
            {% if not loop.first %}
              <span class="action-link"
                    role="button"
                    id={{ "del_criterion-" ~ loop.index }}>
                {{_('Remove')}}
              </span>
            {% endif %}
          </td>
      </tr>
  {% endfor %}
  </table>
  <div class="actions-container">
    <div style="display:none">
      <table><tbody id="empty_criterion_form">
        <tr class="extra-criterion" >
          <td>{{ formset.empty_form.field_name.errors }}{{ formset.empty_form.field_name }}</td>
          <td>{{ formset.empty_form.relation.errors }}{{ formset.empty_form.relation }} </td>
          <td>{{ formset.empty_form.field_value.errors }}{{ formset.empty_form.field_value }}</td>
          <td>
            <span class="action-link" role="button" id="del_criterion-__prefix__">
              {{_('Remove')}}
            </span>
          </td>
        </tr>
      </tbody></table>
    </div>
    <span id="criterion_error_message" class="errorlist" style="display:none">{{_('A batch of tasks may have at most {max_forms} invalidation criteria.')|f(max_forms=max_forms)}}</span>
    <span class="action-link" role="button" id="add_criterion">
      {{_('Add Criterion')}}
    </span>
  </div>
</div>
